<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Nashr â€“ ØªØ¬Ø±Ø¨Ø© Ø§Ù„ØªÙˆÙ„ÙŠØ¯</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #15203a, #0b1220);
      color: #e6ebf2;
    }
    .container { max-width: 900px; margin: auto; padding: 40px 20px; }
    h1 { text-align: center; margin-bottom: 10px; }
    .sub { text-align: center; color: #9aa4b2; margin-bottom: 22px; }

    .card {
      background: #111a2e;
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 18px;
    }

    label { display:block; margin-bottom:6px; font-size:14px; color:#9aa4b2; }
    textarea, select {
      width:100%; background:#0b1220; color:#e6ebf2;
      border:1px solid rgba(255,255,255,.15);
      border-radius:10px; padding:12px; font-size:14px;
      margin-bottom:14px;
    }
    textarea { min-height:140px; resize:vertical; }

    button {
      width:100%; background:#4da3ff; color:#fff;
      border:none; padding:14px; border-radius:12px;
      font-size:15px; font-weight:800; cursor:pointer;
    }
    button:disabled { opacity:.6; cursor:not-allowed; }

    .output {
      white-space:pre-wrap; line-height:1.8; font-size:15px;
      background:#0b1220; border:1px solid rgba(255,255,255,.12);
      border-radius:12px; padding:14px; min-height:120px;
    }

    .meta {
      display:flex; justify-content:space-between;
      color:#9aa4b2; font-size:12px; margin-top:8px;
    }

    footer { text-align:center; margin-top:24px; color:#9aa4b2; font-size:13px; }
  </style>
</head>

<body>
  <div class="container">

    <h1>ğŸ§  Nashr â€“ ØªØ¬Ø±Ø¨Ø© Ø§Ù„ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø°ÙƒÙŠ</h1>
    <div class="sub">Ø§ÙƒØªØ¨ Ø§Ù„ÙÙƒØ±Ø©ØŒ Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†ØµØ©ØŒ ÙˆØ§Ø¶ØºØ· ØªÙˆÙ„ÙŠØ¯</div>

    <div class="card">
      <label>Ø§Ù„ÙÙƒØ±Ø© / Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹</label>
      <textarea id="text" placeholder="Ø§ÙƒØªØ¨ ÙÙƒØ±ØªÙƒ Ù‡Ù†Ø§..."></textarea>

      <label>Ø§Ù„Ù…Ù†ØµØ©</label>
      <select id="platform">
        <option value="Both">LinkedIn + X</option>
        <option value="LinkedIn">LinkedIn</option>
        <option value="X">X</option>
      </select>

      <button id="runBtn" type="button">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ù…Ø­ØªÙˆÙ‰</button>

      <div class="meta">
        <span>API: /api/run</span>
        <a href="/health" target="_blank">health</a>
      </div>
    </div>

    <div class="card">
      <label>Ø§Ù„Ù†ØªÙŠØ¬Ø©</label>
      <div id="output" class="output">â€”</div>
      <div class="meta">
        <span id="status">Ø§Ù„Ø­Ø§Ù„Ø©: Ø¬Ø§Ù‡Ø²</span>
        <span id="debug">â€”</span>
      </div>
    </div>

    <footer>Nashr Â© 2025 Â· Demo Version</footer>
  </div>

<script>
const btn = document.getElementById("runBtn");
const out = document.getElementById("output");
const status = document.getElementById("status");
const debug = document.getElementById("debug");

btn.onclick = async () => {
  const text = document.getElementById("text").value.trim();
  const platform = document.getElementById("platform").value;

  if (!text) { alert("Ø§ÙƒØªØ¨ Ø§Ù„ÙÙƒØ±Ø© Ø£ÙˆÙ„Ø§Ù‹"); return; }

  btn.disabled = true;
  out.textContent = "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆÙ„ÙŠØ¯...";
  status.textContent = "Ø§Ù„Ø­Ø§Ù„Ø©: Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";
  debug.textContent = "â€”";

  try {
    const res = await fetch("/api/run", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text, platform })
    });

    const data = await res.json();
    if (!res.ok || !data.ok) throw new Error(data.error || "ÙØ´Ù„ Ø§Ù„ØªÙˆÙ„ÙŠØ¯");

    out.textContent = data.output || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù†Ø§ØªØ¬";
    status.textContent = "Ø§Ù„Ø­Ø§Ù„Ø©: ØªÙ… âœ…";
    debug.textContent = "HTTP " + res.status;

  } catch (e) {
    out.textContent = "âŒ Ø®Ø·Ø£: " + e.message;
    status.textContent = "Ø§Ù„Ø­Ø§Ù„Ø©: ÙØ´Ù„ âŒ";
    debug.textContent = "Ø±Ø§Ø¬Ø¹ /health Ùˆ Logs";
  } finally {
    btn.disabled = false;
  }
};
</script>

</body>
</html>